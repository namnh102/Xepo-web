import{_ as M}from"./DkNOHVCC.js";import{g as N,k as o,l as S,c as a,o as n,a as e,n as c,v as i,x as b,y as x,F as V,p as C,t as d,b as A,w as D,z as G,_ as E}from"#entry";import{u as F}from"./BxRQacOH.js";const $={class:"search-bar"},j={class:"search-input-wrap main-search"},z={class:"category-select"},I=["value"],K={class:"filter-group"},O={class:"price-filter"},R={key:0},Z={key:1,class:"posts-grid"},q=["src"],H={class:"card-info"},J={class:"card-title"},Q={class:"card-price"},W={class:"pagination"},X=["disabled"],Y={class:"page-num"},P=10,tt=N({__name:"PostsList",setup(et){const v=o(""),p=o(""),l=o(1),m=o([]),w=o(0),h=o([]),g=o(!1),_=o(),f=o(),y=o("createdAt"),k=o("desc");async function T(){try{const u=G(),t=await fetch(`${u.public.apiBase}/posts/categories/list`);if(!t.ok)throw new Error("Không lấy được danh sách chuyên mục");h.value=await t.json()}catch{h.value=[]}}async function r(){g.value=!0;const{fetchPosts:u}=F(),t=await u(p.value,v.value,l.value,P,_.value,f.value,y.value,k.value);m.value=t.data,w.value=t.total,g.value=!1}function B(){l.value++,r()}function L(){l.value>1&&l.value--,r()}return S(()=>{T(),r()}),(u,t)=>{const U=M;return n(),a("div",null,[e("div",$,[e("div",j,[t[6]||(t[6]=e("svg",{class:"search-icon",width:"22",height:"22",viewBox:"0 0 24 24"},[e("circle",{cx:"11",cy:"11",r:"8",stroke:"#888","stroke-width":"2",fill:"none"}),e("line",{x1:"21",y1:"21",x2:"16.5",y2:"16.5",stroke:"#888","stroke-width":"2"})],-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),placeholder:"Tìm kiếm sản phẩm, từ khoá...",class:"search-input"},null,512),[[b,v.value]])]),e("div",z,[t[8]||(t[8]=e("span",{class:"cat-label"},"Danh mục",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s)},[t[7]||(t[7]=e("option",{value:""},"Tất cả chuyên mục",-1)),(n(!0),a(V,null,C(h.value,s=>(n(),a("option",{key:s,value:s},d(s),9,I))),128))],512),[[x,p.value]])]),e("div",K,[e("div",O,[i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),type:"number",min:"0",placeholder:"Giá từ",class:"price-input"},null,512),[[b,_.value,void 0,{number:!0}]]),t[9]||(t[9]=e("span",{style:{margin:"0 4px"}},"-",-1)),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),type:"number",min:"0",placeholder:"Đến",class:"price-input"},null,512),[[b,f.value,void 0,{number:!0}]])]),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>y.value=s),class:"sort-select"},[...t[10]||(t[10]=[e("option",{value:"createdAt"},"Mới nhất",-1),e("option",{value:"title"},"A-Z",-1),e("option",{value:"price"},"Giá",-1)])],512),[[x,y.value]]),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>k.value=s),class:"sort-select"},[...t[11]||(t[11]=[e("option",{value:"desc"},"Giảm dần",-1),e("option",{value:"asc"},"Tăng dần",-1)])],512),[[x,k.value]])]),e("button",{class:"search-btn",onClick:r},"Tìm kiếm")]),g.value?(n(),a("div",R,"Đang tải...")):c("",!0),m.value.length?(n(),a("div",Z,[(n(!0),a(V,null,C(m.value,s=>(n(),a("div",{key:s.id,class:"post-card"},[A(U,{to:`/posts/${s.id}`,class:"card-link"},{default:D(()=>[s.thumbnail?(n(),a("img",{key:0,src:s.thumbnail,alt:"Ảnh sản phẩm",class:"card-thumb"},null,8,q)):c("",!0),e("div",H,[e("div",J,d(s.title),1),e("div",Q,d(s.price?s.price.toLocaleString()+" ₫":"Liên hệ"),1)])]),_:2},1032,["to"])]))),128))])):c("",!0),e("div",W,[e("button",{onClick:L,disabled:l.value===1,class:"page-btn"},"Trước",8,X),e("span",Y,"Trang "+d(l.value),1),l.value*P<w.value?(n(),a("button",{key:0,onClick:B,class:"page-btn"},"Sau")):c("",!0)])])}}}),nt=E(tt,[["__scopeId","data-v-51ada797"]]);export{nt as P};
